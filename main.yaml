blocks:
  # Setup: Create output directory for parallel tasks
  - run: "mkdir -p parallel_outputs && echo 'Setup complete'"

  # Execute 4 tasks simultaneously - demonstrates parallel execution speed
  - parallel:
      # Task 1: Count from 1 to 5 with delays
      - run: |
          for i in 1 2 3 4 5; do
            echo "Task 1: Count $i"
            sleep 1
          done
          echo "Task 1: Complete!" > parallel_outputs/task1.txt

      # Task 2: Print letters A to E with delays
      - run: |
          for letter in A B C D E; do
            echo "Task 2: Letter $letter"
            sleep 1
          done
          echo "Task 2: Complete!" > parallel_outputs/task2.txt

      # Task 3: Gather system information
      - run: |
          echo "Task 3: Collecting system info..."
          echo "Date: $(date)" > parallel_outputs/task3.txt
          echo "Uptime: $(uptime)" >> parallel_outputs/task3.txt
          echo "Disk Usage:" >> parallel_outputs/task3.txt
          df -h >> parallel_outputs/task3.txt
          sleep 2
          echo "Task 3: Complete!"

      # Task 4: Create multiple test files
      - run: |
          echo "Task 4: Creating test files..."
          for i in 1 2 3; do
            echo "Test file $i" > parallel_outputs/testfile_$i.txt
            sleep 1
          done
          echo "Task 4: Complete!"

  # Verify all parallel tasks completed successfully
  - run: |
      echo "Verifying parallel execution results..."
      ls -la parallel_outputs/
      echo "Contents of task outputs:"
      cat parallel_outputs/task1.txt parallel_outputs/task2.txt

  # Cleanup: Remove output directory
  - run: "rm -rf parallel_outputs && echo 'Cleanup complete!'"
